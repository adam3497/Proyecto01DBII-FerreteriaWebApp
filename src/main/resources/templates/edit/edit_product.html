<!DOCTYPE html>
<html lang="es" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Editar Producto | Base de datos Ferretería</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.2/js/bootstrap.bundle.min.js"
        rel="stylesheet">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script>
    $(function() {
      $("#formList").submit(function() {

      });
    });
  </script>
</head>
<body>
<div th:replace="_fragments/pageforms_fragment :: forms_structure"></div>

<div class="container">
  <div class="row">
    <div class="col-md-10 offset-1 mb-3">

      <div th:if="${param.error}">
        <div class="alert alert-danger">
          <p th:text="${param.errorMsg}"></p>
        </div>
      </div>
      <div th:if="${param.success}">
        <div class="alert alert-info">
          <p th:text="${param.successMsg}"></p>
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-header">
          <h3 class="text-center">Lista de Productos</h3>
        </div>

        <div class="card-body">
          <form method="post" th:action="@{/edit/edit_product/selected}" role="form"
                th:object="${product}" id="formList">
            <div id="divProductId" hidden="hidden">
              <input type="number" id="inputProductId" name="inputProductId" th:field="*{productID}">
              <label for="inputProductId"></label>
            </div>
            <table class="table">
              <thead>
              <tr>
                <th scope="col">Número Item</th>
                <th scope="col">Nombre</th>
                <th scope="col">Precio</th>
                <th scope="col">Cantidad</th>
                <th scope="col">Fecha Vencimiento</th>
                <th scope="col">Categoría</th>
                <th scope="col">Opciones</th>
              </tr>
              </thead>
              <tbody>
              <!-- Bloque de código a repetir con el th:each -->
              <tr th:each="product,iterStat : ${products}">
                <th scope="row" th:text="${iterStat.index + 1}"></th>
                <td th:text="${product.id}" hidden="hidden"></td>
                <td th:text="${product.name}"></td>
                <td th:text="${product.price}"></td>
                <td th:text="${product.amount}"></td>
                <td th:text="${product.expirationDate}"></td>
                <td th:text="${product.categoryName}"></td>
                <td>
                  <button class="btn btn-outline-primary btn-sm rounded-3" type="submit"
                          data-toggle="tooltip" data-placement="top" title="Editar"
                          th:onclick="">
                    <i class="fa fa-edit"></i>
                  </button>
                </td>
              </tr>
              </tbody>
            </table>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>